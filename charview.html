<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Character Inspector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Water.css -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">

  <style>
    textarea {
      width: 100%;
      height: 220px;
      font-family: monospace;
    }

    #output {
      margin-top: 1rem;
      font-family: monospace;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    .char {
      padding: 2px 4px;
      border-radius: 4px;
      margin: 1px;
      display: inline-block;
    }

    .visible {
      background: #99999955;
    }

    .newline {
      background: #16a599;
    }

    .tab {
      background: #8822cc;
    }

    .space {
      background: #88aa55;
    }

    .control {
      background: #aa5656;
    }

    .legend span {
      padding: 2px 6px;
      border-radius: 4px;
      margin-right: 6px;
      font-family: monospace;
    }
  </style>
</head>

<body>
  <h1>Invisible Character Inspector</h1>

  <p>Paste text below to reveal normally invisible characters like newlines, tabs, and spaces.</p>

  <textarea id="input" placeholder="Paste text here"></textarea>

  <button id="inspectBtn">Inspect</button>
  <label style="margin-left:1rem;">
    <input type="checkbox" id="plainToggle" /> Show formatted text plainly
  </label>

  <div class="legend">
    <strong>Legend:</strong><br />
    <span class="space">␠ space</span>
    <span class="tab">⇥ tab (\\t)</span>
    <span class="newline">↵ newline (\\n)</span>
    <span class="control">control char</span>
  </div>

  <h3>Formatted view</h3>
  <pre id="plainOutput" style="display:none;"></pre>

  <h3>Character view</h3>
  <div id="output"></div>

  <script>
    const input = document.getElementById('input');
    const output = document.getElementById('output');
    const btn = document.getElementById('inspectBtn');
    const toggle = document.getElementById('plainToggle');
    const plain = document.getElementById('plainOutput');

    function describeChar(ch) {
      if (ch === '\n') return {label: '↵\\n', cls: 'newline'};
      if (ch === '\t') return {label: '⇥\\t', cls: 'tab'};
      if (ch === ' ') return {label: '␠', cls: 'space'};

      const code = ch.charCodeAt(0);
      if (code < 32 || code === 127) {
        return {label: `U+${code.toString(16).padStart(4, '0')}`, cls: 'control'};
      }

      return {label: ch, cls: 'visible'};
    }

    function render() {
      const value = input.value;

      // Plain formatted output
      plain.textContent = value;
      plain.style.display = toggle.checked ? 'block' : 'none';

      // Character output
      output.innerHTML = '';
      [...value].forEach(ch => {
        const {label, cls} = describeChar(ch);
        const span = document.createElement('span');
        span.className = `char ${cls}`;
        span.textContent = label;
        output.appendChild(span);
      });
    }

    btn.addEventListener('click', render);
    toggle.addEventListener('change', render);
  </script>
</body>

</html>
